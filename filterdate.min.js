!function(e){"use strict";var t={0:"No filter",1:"Today",2:"Yesterday",3:"Last 7 days",4:"Last week",5:"Last 30 days",6:"Last month",7:"Custom"};function a(a,n){var s=this;s.$select=e(a),s.defaults={values:t,convertDateToString:!0,emptyFilter:!0,onSelectedCustomizeFilter:function(e){return console.log("noFilterCallback"),!1},onStartChangeEvent:function(e){return console.log("onStartChangeEvent"),!1},onEndChangeEvent:function(e,t){return console.log("onEndChangeEvent"),!1},onSelectedNoFilter:function(){return!1}},s.init(n)}a.prototype={init:function(t){var a=this;a.defaults=e.extend({},a.defaults,t),!a.defaults.emptyFilter&&a.defaults.values.hasOwnProperty(0)&&delete a.defaults.values[0],a.$select.empty();for(var n=Object.keys(a.defaults.values),s=Object.values(a.defaults.values),r=0;r<n.length;r++){var o=document.createElement("option");o.value=n[r],o.innerHTML=s[r],a.$select.append(o)}a.$select.on("change",function(t){t.preventDefault();var n=Number(e(this).val());return isNaN(n)?(console.error("Select's values must be numbers","--\x3e "+e(this).val()),!1):(a.defaults.onStartChangeEvent(n),a.filter(n),!1)})},filter:function(e){var t,a,n=this,s=new Date;switch(e){case 0:if(!n.defaults.emptyFilter)return n.defaults.onSelectedNoFilter(),!1;break;case 1:t=a=n.addDays(s,0);break;case 2:t=a=n.addDays(s,-1);break;case 3:s.setDate(s.getDate()-1),a=n.addDays(s,-6),t=n.addDays(s,0);break;case 4:s.setDate(s.getDate()-1),a=n.addDays(n.getMonday(s),-7),t=n.addDays(n.getMonday(s),-1);break;case 5:s.setDate(s.getDate()-1),a=n.addDays(s,-29),t=n.addDays(s,0);break;case 6:s.setDate(s.getDate()-1),a=n.getFirstOfMonth(s,-1),t=n.addDays(n.getFirstOfMonth(s,0),-1);break;case 7:return n.defaults.onSelectedCustomizeFilter(e),!1}return n.defaults.convertDateToString&&(t=n.setFormatDate(t),a=n.setFormatDate(a)),n.defaults.onEndChangeEvent(t,a),!1},addDays:function(e,t){var a=new Date(e);return a.setDate(a.getDate()+t),a},getFirstOfMonth:function(e,t){var a=new Date(e);return a.setMonth(a.getMonth()+t),a.setDate(1),a},getMonday:function(e){var t=(e=new Date(e)).getDay(),a=e.getDate()-t+(0==t?-6:1);return new Date(e.setDate(a))},setFormatDate:function(e){var t=e.getDate(),a=e.getMonth()+1,n=e.getFullYear();return t<10&&(t="0"+t),a<10&&(a="0"+a),t+"-"+a+"-"+n}},e.fn.filterDate=function(t,n){var s="filterDate";return this.each(function(){var r=e(this),o=r.data(s);"string"==typeof t?o&&"function"==typeof o[t]&&o[t](n):(o&&o.dispose&&o.dispose(),o=new a(this,t),r.data(s,o))})}}(jQuery);