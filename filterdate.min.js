!function(e){"use strict";function t(t,a){var s=this;s.$select=e(t),s.defaults={values:{0:"No filter",1:"Today",2:"Yesterday",3:"Last 7 days",4:"Last week",5:"Last 30 days",6:"Last month",7:"Custom"},rangeValues:{0:"No filter",1:"10 days ago",2:"10 - 20 days ago",3:"20 - 30 days ago",4:"30 - 40 days ago",5:"40 - 50 days ago",6:"50 - 60 days ago"},serie:10,type:"none",formatDateString:"default",customFilter:!1,convertDateToString:!0,emptyFilter:!0,onSelectedCustomizeFilter:function(e){},onStartChangeEvent:function(e){},onEndChangeEvent:function(e,t){},onSelectedNoFilter:function(){}},s.init(a)}t.prototype={init:function(t){var a=this;a.defaults=e.extend({},a.defaults,t),!a.defaults.emptyFilter&&a.defaults.values.hasOwnProperty(0)&&delete a.defaults.values[0],!1===a.defaults.customFilter&&delete a.defaults.values[7],a.setValuesByType(a.defaults.type),a.setSelectValues(a.$select,a.defaults.values),a.$select.on("change",function(t){t.preventDefault();var s=Number(e(this).val());return isNaN(s)?(console.error("Select's values must be numbers","--\x3e "+e(this).val()),!1):(a.defaults.onStartChangeEvent(s),a.filter(s),!1)})},setSelectValues:function(e,t){e.empty();for(var a=Object.keys(t),s=Object.values(t),n=0;n<a.length;n++){var r=document.createElement("option");r.value=a[n],r.innerHTML=s[n],e.append(r)}},setValuesByType:function(e){switch(e){case"range":this.defaults.values=this.defaults.rangeValues}},filter:function(e){var t=this;switch(t.defaults.type){case"range":t.filterByRangeOfDate(e);break;default:t.defaultFilter(e)}},filterByRangeOfDate:function(e){var t=this,a=new Date,s=new Date;if(0==e)t.isNoFilter();else{var n=t.defaults.serie*(e-1),r=t.defaults.serie*e;a=t.addDays(a,-n),s=t.addDays(s,-r)}t.defaults.convertDateToString&&(s=t.setFormatDate(s),a=t.setFormatDate(a)),t.defaults.onEndChangeEvent(s,a)},isNoFilter:function(){if(this.defaults.emptyFilter)return this.defaults.onSelectedNoFilter(),!1},defaultFilter:function(e){var t,a,s=this,n=new Date;switch(e){case 0:s.isNoFilter();break;case 1:t=a=s.addDays(n,0);break;case 2:t=a=s.addDays(n,-1);break;case 3:n.setDate(n.getDate()-1),a=s.addDays(n,-6),t=s.addDays(n,0);break;case 4:n.setDate(n.getDate()-1),a=s.addDays(s.getMonday(n),-7),t=s.addDays(s.getMonday(n),-1);break;case 5:n.setDate(n.getDate()-1),a=s.addDays(n,-29),t=s.addDays(n,0);break;case 6:n.setDate(n.getDate()-1),a=s.getFirstOfMonth(n,-1),t=s.addDays(s.getFirstOfMonth(n,0),-1);break;case 7:return s.defaults.onSelectedCustomizeFilter(e),!1}return s.defaults.convertDateToString&&(t=s.setFormatDate(t),a=s.setFormatDate(a)),s.defaults.onEndChangeEvent(t,a),!1},addDays:function(e,t){var a=new Date(e);return a.setDate(a.getDate()+t),a},getFirstOfMonth:function(e,t){var a=new Date(e);return a.setMonth(a.getMonth()+t),a.setDate(1),a},getMonday:function(e){var t=(e=new Date(e)).getDay(),a=e.getDate()-t+(0==t?-6:1);return new Date(e.setDate(a))},setFormatDate:function(e){if(void 0===e)return"";var t=e.getDate(),a=e.getMonth()+1,s=e.getFullYear(),n=e.getMinutes(),r=e.getSeconds();t<10&&(t="0"+t),a<10&&(a="0"+a);var i="";switch(this.defaults.formatDateString){case"ISO":i=s+"-"+a+"-"+t+" "+n+":"+r;break;case"short":case"it":i=t+"/"+a+"/"+s;break;case"full-it":i=t+"/"+a+"/"+s+" "+n+":"+r;break;case"full-en":i=a+"/"+t+"/"+s+" "+n+":"+r;break;case"en":default:i=a+"/"+t+"/"+s}return i}},e.fn.filterDate=function(a,s){var n="filterDate";return this.each(function(){var r=e(this),i=r.data(n);"string"==typeof a?i&&"function"==typeof i[a]&&i[a](s):(i&&i.dispose&&i.dispose(),i=new t(this,a),r.data(n,i))})}}(jQuery);